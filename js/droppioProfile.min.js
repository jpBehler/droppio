$(document).ready(function(){function e(){this._jsonified=[],this.bloodType=!1,this.name=!1,this.lastname=!1,this.dni=!1,this.email=!1,this.weight=!1,this.birthDate=!1,this.password=!1,this.toJSON=function(){for(var e in this)-1==e.indexOf("_")&&this[e].length&&this._jsonified.push({_id:e,value:this[e]});return this._jsonified}}function t(e){i.location={lat:e.coords.latitude,lon:e.coords.longitude}}var i=new e;navigator.geolocation.watchPosition(function(e){t(e)}),$.post("/registerTest",{_xsrf:xsrf_token,type:"creds"}).done(function(e){if(e=JSON.parse(e),respType=e.type,"creds"==respType){var t=e.dbUser,s=e.dbPass,a=new PouchDB("settings"+t,{auto_compaction:!1,cache:!1,heartbeat:!0}),n=new PouchDB("https://"+t+":"+s+"@alfredarg.com:6489/settings"+t);$("#saveSettings").submit(function(e){e.preventDefault(),i.name=$("#name").val(),i.lastname=$("#lastname").val(),i.bloodType=$("#bloodType").val(),i.dni=$("#dni").val(),i.email=$("#email").val(),i.birthDate=$("#birthDate").val(),i.weight=$("#weight").val(),i.password=$("#password").val(),i.radius=$("#radius").val(),elems=i.toJSON(),a.allDocs({include_docs:!0,keys:elems}).then(function(e){console.log(e)}).catch(function(e){})}),a.sync(n,{live:!0,retry:!0,back_off_function:function(e){return 0==e?1e3:e>=1e3&&e<18e5?1.5*e:e>=18e5?1.1*e:void 0}}).on("error",function(e){})}}),$(".datepicker").pickadate({selectMonths:!0,selectYears:15,today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!1}),$("select").material_select()});