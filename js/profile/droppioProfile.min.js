$(document).ready(function(){function e(){this._jsonified=[],this._keys=[],this.bloodType=!1,this.name=!1,this.lastname=!1,this.dni=!1,this.email=!1,this.weight=!1,this.birthDate=!1,this.password=!1,this.toJSON=function(){for(var e in this)-1==e.indexOf("_")&&this[e].length&&(this._jsonified[e]=this[e]);return this._jsonified}}function t(e){o.location={lat:e.coords.latitude,lon:e.coords.longitude};var t=new google.maps.LatLng(o.location.lat,o.location.lon),a={location:t,query:"hospitals near Mendoza"};new google.maps.places.PlacesService(map).search(a,function(e,t){t==google.maps.places.PlacesServiceStatus.OK&&console.log(e)})}var o=new e;navigator.geolocation.watchPosition(function(e){t(e)}),$.post("/registerTest",{_xsrf:xsrf_token,type:"creds"}).done(function(e){if(e=JSON.parse(e),respType=e.type,"creds"==respType){var t=e.dbUser,a=e.dbPass,s=new PouchDB("settings"+t,{auto_compaction:!1,cache:!1,heartbeat:!0}),n=new PouchDB("https://"+t+":"+a+"@alfredarg.com:6489/settings"+t);$("#saveSettings").submit(function(e){e.preventDefault(),o.name=$("#name").val(),o.lastname=$("#lastname").val(),o.bloodType=$("#bloodType").val(),o.dni=$("#dni").val(),o.email=$("#email").val(),o.birthDate=$("#birthDate").val(),o.weight=$("#weight").val(),o.password=$("#password").val(),o.radius=$("#radius").val(),elems=o.toJSON(),keys=Object.keys(elems),s.allDocs({include_docs:!0,keys:keys}).then(function(e){e.rows.forEach(function(e){"error"in e?s.put({_id:e.key,value:elems[e.key]}).catch(function(e){}):(doc=e.doc,doc.value=elems[e.key],console.log(doc),s.put(doc).catch(function(e){}))})}).catch(function(e){})}),s.sync(n,{live:!0,retry:!0,back_off_function:function(e){return 0==e?1e3:e>=1e3&&e<18e5?1.5*e:e>=18e5?1.1*e:void 0}}).on("error",function(e){})}}),$(".datepicker").pickadate({selectMonths:!0,selectYears:15,today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!1}),$("select").material_select()});